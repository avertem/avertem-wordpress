(this.webpackJsonpnamespace=this.webpackJsonpnamespace||[]).push([[0],{148:function(e,a,t){e.exports=t(304)},153:function(e,a,t){},162:function(e,a){},164:function(e,a){},211:function(e,a){},212:function(e,a){},304:function(e,a,t){"use strict";t.r(a);var n=t(1),o=t.n(n),c=t(32),s=t.n(c),l=(t(153),t(154),t(322)),r=t(85),i=t.n(r),m=t(146),h=t(33),u=t(16),d=t(17),p=t(52),f=t(51),g=t(24),E=t(53),_=t(305),v=t(306),w=t(307),y=t(308),C=t(309),b=t(310),j=t(311),k=t(312),O=t(323),D=t(313),N=t(314),S=t(315),T=t(316),A=t(317),B=t(318),M=t(319),x=t(320),H=t(321),q=t(86),F={accountDetails:{account:"",debits:0,credits:0,total:0,progress:0}},P=o.a.createContext({accountDetails:F.accountDetails}),X=t(47).sha256,L=t(8).Buffer,V=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(p.a)(this,Object(f.a)(a).call(this,e))).toggle=function(e){return function(){var a;console.log("Toggle the modal stuff "+e),t.setState((a={},Object(h.a)(a,"modal_".concat(e),!t.state["modal_".concat(e)]),Object(h.a)(a,"modal_confirm",!0),Object(h.a)(a,"modal_request",!1),Object(h.a)(a,"modal_complete",!1),Object(h.a)(a,"modal_failure",!1),a))}},t.state={modal_send:!1,modal_confirm:!0,modal_request:!1,modal_complete:!1,modal_failure:!1,namespace_info:{name:"",hash:"",type:"contract",mnemonic:""},request_info:{},complete_info:{transactionHash:"",transactionValue:0},failure_info:{transactionHash:"",transactionValue:0,error:""}},t.handleNameChange=t.handleNameChange.bind(Object(g.a)(t)),t.handleHashChange=t.handleHashChange.bind(Object(g.a)(t)),t.handleTypeChange=t.handleTypeChange.bind(Object(g.a)(t)),t.handleMnemonicChange=t.handleMnemonicChange.bind(Object(g.a)(t)),t.sendNamespace=t.sendNamespace.bind(Object(g.a)(t)),t}return Object(E.a)(a,e),Object(d.a)(a,[{key:"handleNameChange",value:function(e){var a=this.state.namespace_info;a.name=e.target.value;var t=X.create();t.update(a.name);var n=new L(t.arrayBuffer());a.hash=n.toString("hex"),this.setState({namespace_info:a})}},{key:"handleHashChange",value:function(e){var a=this.state.namespace_info;a.hash=e.target.value,this.setState({namespace_info:a})}},{key:"handleTypeChange",value:function(e){console.log("The event [%o]",e.target.value);var a=this.state.namespace_info;a.type=e.target.value,this.setState({namespace_info:a})}},{key:"handleMnemonicChange",value:function(e){var a=this.state.namespace_info;a.mnemonic=e.target.value,this.setState({namespace_info:a})}},{key:"sendNamespace",value:function(){var e=Object(m.a)(i.a.mark((function e(a){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Selected : [%o]",this.state.namespace_info),a.preventDefault(),t=new q.b(new q.a(this.state.namespace_info.mnemonic),20,this.context.accountDetails.account,this.context.accountDetails.account,"D594F22DC389E38B3DE7FA5630DBD9DCA16DA8A77097516FD37F9E25C6BE24D2",{contract:"9B37273E25CA8476B2B78FDC6305579BDF046547B354C8EBB1D2C29ECF02795E",contractName:"avertem__namespace_management_contract",model:{subjects:[{subject:"http://keto-coin.io/schema/rdf/1.0/keto/Namespace#Namespace/"+this.state.namespace_info.hash,predicates:[{predicate:"http://keto-coin.io/schema/rdf/1.0/keto/Namespace#id",objects:[{value:this.state.namespace_info.hash,dataType:"http://www.w3.org/2001/XMLSchema#string"}]},{predicate:"http://keto-coin.io/schema/rdf/1.0/keto/Namespace#hash",objects:[{value:this.state.namespace_info.hash,dataType:"http://www.w3.org/2001/XMLSchema#string"}]},{predicate:"http://keto-coin.io/schema/rdf/1.0/keto/Namespace#accountHash",objects:[{value:this.context.accountDetails.account,dataType:"http://www.w3.org/2001/XMLSchema#string"}]},{predicate:"http://keto-coin.io/schema/rdf/1.0/keto/Namespace#namespace",objects:[{value:this.state.namespace_info.name,dataType:"http://www.w3.org/2001/XMLSchema#string"}]},{predicate:"http://keto-coin.io/schema/rdf/1.0/keto/Namespace#type",objects:[{value:this.state.namespace_info.type,dataType:"http://www.w3.org/2001/XMLSchema#string"}]},{predicate:"http://keto-coin.io/schema/rdf/1.0/keto/AccountModifier#accountModifier",objects:[{value:"PUBLIC",dataType:"http://www.w3.org/2001/XMLSchema#string"}]}]}]}}),this,this.setState({modal_confirm:!1,modal_request:!0,modal_complete:!1}),fetch("/wp-json/avertem/v1/transaction/send",{method:"POST",body:t.getProtoTransBuffer(),mode:"cors",headers:{"Content-Type":"application/protobuf",session_hash:this.authSession,"Access-Control-Allow-Origin":"*","X-WP-Nonce":window._namespace_wpnonce},rejectUnauthorized:!1}).then((function(e){console.log("After sending the result is %o",e),200==e.status&&(console.log("Update the status %o",e),n.setState({modal_confirm:!1,modal_request:!1,modal_complete:!0,complete_info:{transactionHash:t.transactionHashValue.toString("hex"),transactionValue:10020}}))})).catch((function(e){console.log("Failed to send the transaction %s",e.statusText)}));case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(_.a,null,o.a.createElement(v.a,null,o.a.createElement(w.a,null,o.a.createElement(y.a,null,o.a.createElement(C.a,{for:"name"},"Name"),o.a.createElement(b.a,{type:"text",name:"name",value:this.state.namespace_info.name,onChange:this.handleNameChange,required:!0},"Name")),o.a.createElement(y.a,null,o.a.createElement(C.a,{for:"hash"},"Hash"),o.a.createElement(b.a,{type:"text",name:"hash",value:this.state.namespace_info.hash,onChange:this.handleHashChange,required:!0},"Hash")),o.a.createElement(y.a,null,o.a.createElement(C.a,{for:"type"},"Type"),o.a.createElement(b.a,{type:"select",name:"type",value:this.state.namespace_info.type,onChange:this.handleTypeChange,required:!0},"Type",o.a.createElement("option",{value:"contract"},"Contract"),o.a.createElement("option",{value:"rdf"},"RDF")))),o.a.createElement(j.a,null,o.a.createElement(k.a,{color:"primary",onClick:this.toggle("send")},"Send"),o.a.createElement(O.a,{isOpen:this.state.modal_send,toggle:this.toggle("send"),className:this.props.className},o.a.createElement(D.a,{toggle:this.toggle("send")},"Confirm Send ",this.state.namespace_info.namespaceName),this.state.modal_confirm&&o.a.createElement(N.a,null,o.a.createElement(y.a,null,o.a.createElement(C.a,{for:"mnemonic"},"Mnemonic Phrase"),o.a.createElement(b.a,{type:"textarea",name:"mnemonic",value:this.state.namespace_info.mnemonic,onChange:this.handleMnemonicChange,required:!0},"Mnemonic Phrase"),o.a.createElement(S.a,{color:"muted"},"Please provide your mnemonic phrase for confirmation."))),this.state.modal_complete&&o.a.createElement(N.a,null,o.a.createElement(T.a,null,o.a.createElement(A.a,null,o.a.createElement(B.a,null,"Transaction"),o.a.createElement(M.a,null,this.state.complete_info.transactionHash)),o.a.createElement(A.a,null,o.a.createElement(B.a,null,"Amount"),o.a.createElement(M.a,null,this.state.complete_info.transactionValue)))),this.state.modal_failure&&o.a.createElement(N.a,null,o.a.createElement(T.a,null,o.a.createElement(A.a,null,o.a.createElement(B.a,null,"Transaction"),o.a.createElement(M.a,null,this.state.failure_info.transactionHash)),o.a.createElement(A.a,null,o.a.createElement(B.a,null,"Amount"),o.a.createElement(M.a,null,this.state.failure_info.transactionValue)),o.a.createElement(A.a,null,o.a.createElement(B.a,null,"Error"),o.a.createElement(M.a,null,this.state.failure_info.transactionValue)))),o.a.createElement(x.a,null,this.state.modal_confirm&&o.a.createElement("div",null,o.a.createElement(k.a,{color:"primary",onClick:this.sendNamespace},"Send")," ",o.a.createElement(k.a,{color:"secondary",onClick:this.toggle("send")},"Cancel")),this.state.modal_request&&o.a.createElement("div",null,o.a.createElement(N.a,null,o.a.createElement(H.a,{color:"dark"}))),this.state.modal_complete&&this.state.modal_failure&&o.a.createElement("div",null,o.a.createElement(k.a,{color:"secondary",onClick:this.toggle("send")},"Close")))))))}}]),a}(n.Component);V.contextType=P;var I=V,W=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(p.a)(this,Object(f.a)(a).call(this,e))).state={accountDetails:F.accountDetails},t}return Object(E.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getAccount()}},{key:"getAccount",value:function(){var e=this;fetch("/wp-json/avertem/v1/account/info",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*","X-WP-Nonce":window._namespace_wpnonce}}).then((function(e){if(200==e.status)return e.json();console.log("Failed to process request [%o]",e)})).then((function(a){if(a){console.log("error [%o]",a);var t=JSON.parse(a);console.log(t),e.setState({accountDetails:{account:t.account,debits:t.data.debits,credits:t.data.credits,total:t.data.total,progress:parseInt(t.data.debits)/parseInt(t.data.credits)*100}})}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return o.a.createElement(P.Provider,{value:this.state},this.props.children)}}]),a}(o.a.Component);var J=function(){return o.a.createElement(W,null,o.a.createElement(l.a,null,o.a.createElement(I,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(J,null),document.getElementById("avertem_namespace_id")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.f48a1249.chunk.js.map